<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="Claude" version="24.7.17">
  <diagram id="aws-infra" name="AWS Infrastructure">
    <mxGraphModel dx="1200" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="AWS Infrastructure - ECS Fargate (hello-world-ecr-ecs-fargate)" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="250" y="20" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- AWS Cloud Box -->
        <mxCell id="aws-cloud" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E7;strokeColor=#FF9900;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1020" height="700" as="geometry"/>
        </mxCell>

        <mxCell id="aws-label" value="AWS Cloud (eu-west-1)" style="text;html=1;align=left;verticalAlign=middle;fontSize=16;fontStyle=1;fontColor=#FF9900;" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="200" height="30" as="geometry"/>
        </mxCell>

        <!-- ECR -->
        <mxCell id="ecr" value="Amazon ECR&#xa;hello-world-ecr-ecs-fargate&#xa;&#xa;Stores Docker images&#xa;Scan on push enabled" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9900;strokeColor=#CC7A00;fontSize=12;fontStyle=1;fontColor=#FFFFFF;arcSize=8;verticalAlign=top;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="150" width="200" height="120" as="geometry"/>
        </mxCell>

        <!-- VPC Box -->
        <mxCell id="vpc" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="320" y="130" width="700" height="500" as="geometry"/>
        </mxCell>

        <mxCell id="vpc-label" value="VPC (10.0.0.0/16)" style="text;html=1;align=left;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
          <mxGeometry x="340" y="140" width="200" height="25" as="geometry"/>
        </mxCell>

        <!-- Public Subnet -->
        <mxCell id="subnet" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="360" y="190" width="620" height="400" as="geometry"/>
        </mxCell>

        <mxCell id="subnet-label" value="Public Subnet (10.0.1.0/24)" style="text;html=1;align=left;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#388E3C;" vertex="1" parent="1">
          <mxGeometry x="380" y="200" width="220" height="25" as="geometry"/>
        </mxCell>

        <!-- Internet Gateway -->
        <mxCell id="igw" value="Internet&#xa;Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=12;fontStyle=1;fontColor=#FFFFFF;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="880" y="250" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- Security Group -->
        <mxCell id="sg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FFA000;strokeWidth=2;dashed=1;arcSize=5;" vertex="1" parent="1">
          <mxGeometry x="400" y="250" width="420" height="300" as="geometry"/>
        </mxCell>

        <mxCell id="sg-label" value="Security Group&#xa;Inbound: TCP 49000 (configurable)" style="text;html=1;align=left;verticalAlign=top;fontSize=12;fontStyle=1;fontColor=#FFA000;" vertex="1" parent="1">
          <mxGeometry x="420" y="260" width="250" height="40" as="geometry"/>
        </mxCell>

        <!-- ECS Cluster -->
        <mxCell id="ecs-cluster" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#FF9800;strokeWidth=2;arcSize=5;" vertex="1" parent="1">
          <mxGeometry x="430" y="320" width="360" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="ecs-label" value="ECS Cluster (hello-world-ecr-ecs-fargate)" style="text;html=1;align=left;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FF9800;" vertex="1" parent="1">
          <mxGeometry x="450" y="330" width="320" height="25" as="geometry"/>
        </mxCell>

        <!-- ECS Service -->
        <mxCell id="ecs-service" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#FF9800;strokeWidth=1;arcSize=5;" vertex="1" parent="1">
          <mxGeometry x="460" y="370" width="300" height="130" as="geometry"/>
        </mxCell>

        <mxCell id="service-label" value="ECS Service (hello-world-ecr-ecs-fargate)" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="475" y="380" width="280" height="20" as="geometry"/>
        </mxCell>

        <!-- Fargate Task -->
        <mxCell id="fargate-task" value="Fargate Task&#xa;&#xa;0.25 vCPU / 512 MB&#xa;Public IP enabled&#xa;Port 49000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9900;strokeColor=#CC7A00;fontSize=12;fontStyle=1;fontColor=#FFFFFF;arcSize=8;verticalAlign=top;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="490" y="410" width="150" height="80" as="geometry"/>
        </mxCell>

        <!-- Container -->
        <mxCell id="container" value="hello-world&#xa;:49000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196F3;strokeColor=#1565C0;fontSize=11;fontStyle=1;fontColor=#FFFFFF;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="660" y="420" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- CloudWatch Logs -->
        <mxCell id="logs" value="CloudWatch Logs&#xa;/ecs/hello-world-&#xa;ecr-ecs-fargate&#xa;(7 days retention)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9C27B0;strokeColor=#7B1FA2;fontSize=11;fontStyle=1;fontColor=#FFFFFF;arcSize=8;verticalAlign=top;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="150" height="90" as="geometry"/>
        </mxCell>

        <!-- IAM Role -->
        <mxCell id="iam" value="IAM Execution Role&#xa;&#xa;ECR pull permissions&#xa;CloudWatch logs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F44336;strokeColor=#C62828;fontSize=11;fontStyle=1;fontColor=#FFFFFF;arcSize=8;verticalAlign=top;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="80" y="450" width="150" height="90" as="geometry"/>
        </mxCell>

        <!-- User/Internet -->
        <mxCell id="user" value="Users&#xa;(Internet)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;fontSize=12;fontStyle=1;arcSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="400" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- Connectors -->
        <!-- ECR to Fargate Task -->
        <mxCell id="conn1" value="pull" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF9900;strokeWidth=2;fontColor=#FF9900;fontSize=11;" edge="1" parent="1" source="ecr" target="fargate-task">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="310" y="210"/>
              <mxPoint x="310" y="450"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Task to Container -->
        <mxCell id="conn2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#2196F3;strokeWidth=2;" edge="1" parent="1" source="fargate-task" target="container">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Container to IGW -->
        <mxCell id="conn3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="container" target="igw">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="850" y="450"/>
              <mxPoint x="850" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- IGW to User -->
        <mxCell id="conn4" value="http://:49000" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#757575;strokeWidth=2;fontColor=#757575;fontSize=11;" edge="1" parent="1" source="igw" target="user">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Task to Logs -->
        <mxCell id="conn5" value="logs" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#9C27B0;strokeWidth=2;dashed=1;fontColor=#9C27B0;fontSize=11;" edge="1" parent="1" source="fargate-task" target="logs">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="450"/>
              <mxPoint x="300" y="365"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- IAM to Task -->
        <mxCell id="conn6" value="role" style="edgeStyle=orthogonalEdgeStyle;rounded=1;curved=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;strokeColor=#F44336;strokeWidth=2;dashed=1;fontColor=#F44336;fontSize=11;" edge="1" parent="1" source="iam" target="fargate-task">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="495"/>
              <mxPoint x="300" y="510"/>
              <mxPoint x="490" y="510"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#CCCCCC;arcSize=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="580" width="200" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="legend-title" value="Resources" style="text;html=1;align=left;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="90" y="590" width="100" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="leg1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9900;strokeColor=#CC7A00;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="95" y="625" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="leg1-txt" value="ECR / ECS" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="125" y="620" width="100" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="leg2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196F3;strokeColor=#1565C0;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="95" y="655" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="leg2-txt" value="Container" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="125" y="650" width="100" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="leg3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9C27B0;strokeColor=#7B1FA2;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="95" y="685" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="leg3-txt" value="CloudWatch" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="125" y="680" width="100" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F44336;strokeColor=#C62828;arcSize=8;" vertex="1" parent="1">
          <mxGeometry x="95" y="715" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="leg4-txt" value="IAM" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="125" y="710" width="100" height="25" as="geometry"/>
        </mxCell>

        <!-- Cost Info -->
        <mxCell id="cost-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#CCCCCC;arcSize=5;" vertex="1" parent="1">
          <mxGeometry x="860" y="580" width="160" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="cost-title" value="Est. Cost" style="text;html=1;align=left;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="870" y="590" width="100" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="cost-content" value="Fargate: ~$10/mo&#xa;ECR: ~$0.10/GB&#xa;Logs: ~$0.50/mo&#xa;&#xa;Total: ~$11/mo" style="text;html=1;align=left;verticalAlign=top;fontSize=12;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="870" y="620" width="140" height="130" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
